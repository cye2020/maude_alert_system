# Dashboard Refactoring Summary

## ğŸ“Œ ë¦¬íŒ©í† ë§ ëª©ì 

ê¸°ì¡´ ëŒ€ì‹œë³´ë“œ ì½”ë“œì—ì„œ **í•˜ë“œì½”ë”©ëœ ë©”ì‹œì§€ ë¬¸ìì—´**ì„ `terminology.yaml` ê¸°ë°˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ ì „í™˜í•˜ì—¬:
- ì¼ê´€ì„± ìˆëŠ” ìš©ì–´ ì‚¬ìš©
- ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë‹¤êµ­ì–´ ì§€ì› ìš©ì´ì„± í™•ë³´

---

## ğŸ¯ ë¦¬íŒ©í† ë§ ë²”ìœ„

### ë³€ê²½ëœ íŒŒì¼

1. **config/dashboard/terminology.yaml** (âœ… ì—…ë°ì´íŠ¸)
   - ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€ í…œí”Œë¦¿ ì¶”ê°€
   - Cluster, EDA, Spike íƒ­ë³„ ë©”ì‹œì§€ ì •ì˜

2. **dashboard/cluster_tab.py** (âœ… ë¦¬íŒ©í† ë§ ì™„ë£Œ)
   - `render_cluster_insights()` í•¨ìˆ˜ terminology ê¸°ë°˜ ì „í™˜
   - ê¶Œì¥ì‚¬í•­ ë©”ì‹œì§€ í…œí”Œë¦¿í™”

3. **dashboard/eda_tab.py** (âœ… ë¦¬íŒ©í† ë§ ì™„ë£Œ)
   - `render_smart_insights()` í•¨ìˆ˜ terminology ê¸°ë°˜ ì „í™˜

4. **dashboard/spike_tab.py** (âœ… ë¦¬íŒ©í† ë§ ì™„ë£Œ)
   - í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ì„¹ì…˜ terminology ê¸°ë°˜ ì „í™˜

---

## ğŸ”§ ì£¼ìš” ë³€ê²½ ì‚¬í•­

### Before (í•˜ë“œì½”ë”©)

```python
# âŒ ê¸°ì¡´ ë°©ì‹ - í•˜ë“œì½”ë”© ë¬¸ìì—´
st.info(f"ğŸ“Š **Cluster {cluster_id}**ê°€ ê°€ì¥ ë§ì€ ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•©ë‹ˆë‹¤ ({count:,}ê±´)")
```

### After (terminology ê¸°ë°˜)

```python
# âœ… ê°œì„  ë°©ì‹ - terminology.yaml ê¸°ë°˜
from dashboard.utils.terminology import get_term_manager

term = get_term_manager()
st.info(term.format_message('cluster_most_cases',
                            cluster_id=cluster_id,
                            count=count))
```

---

## ğŸ“‹ ì¶”ê°€ëœ ë©”ì‹œì§€ í…œí”Œë¦¿

### terminology.yaml ì¶”ê°€ ë‚´ìš©

```yaml
message_templates:
  # ========== Cluster íƒ­ ì¸ì‚¬ì´íŠ¸ ==========
  cluster_most_cases: 'ğŸ“Š **Cluster {cluster_id}**ê°€ ê°€ì¥ ë§ì€ ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•©ë‹ˆë‹¤ ({count:,}ê±´)'
  cluster_highest_cfr: 'âš ï¸ **Cluster {cluster_id}**ì˜ ì¹˜ëª…ë¥ ì´ **{cfr:.2f}%**ë¡œ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤ (ì¤‘ëŒ€ í”¼í•´ {severe_count:,}ê±´)'
  cluster_lowest_cfr: 'âœ… **Cluster {cluster_id}**ì˜ ì¹˜ëª…ë¥ ì´ **{cfr:.2f}%**ë¡œ ê°€ì¥ ë‚®ìŠµë‹ˆë‹¤'
  cluster_common_components: 'ğŸ”§ **ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ê³µí†µìœ¼ë¡œ ë°œê²¬ëœ ë¬¸ì œ ë¶€í’ˆ**: {parts}'

  # ê¶Œì¥ì‚¬í•­
  cluster_recommendation_high_cfr: '- **Cluster {cluster_id}**ì— ëŒ€í•œ ì§‘ì¤‘ ì¡°ì‚¬ ë° ì•ˆì „ì„± ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤'
  cluster_recommendation_large: '- **Cluster {cluster_id}**ì˜ ëŒ€ëŸ‰ ì¼€ì´ìŠ¤ì— ëŒ€í•œ íŒ¨í„´ ë¶„ì„ì„ ìˆ˜í–‰í•˜ì„¸ìš”'
  cluster_recommendation_common_parts: '- ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë°˜ë³µë˜ëŠ” ë¬¸ì œ ë¶€í’ˆì— ëŒ€í•œ ê·¼ë³¸ ì›ì¸ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤'
  cluster_recommendation_none: '- í˜„ì¬ ë°ì´í„°ì—ì„œ íŠ¹ë³„í•œ ì¡°ì¹˜ê°€ í•„ìš”í•œ í•­ëª©ì€ ì—†ìŠµë‹ˆë‹¤'

  # ========== EDA íƒ­ ì¸ì‚¬ì´íŠ¸ ==========
  eda_top_product: 'ğŸ“Š **{manufacturer_product}**ì˜ ë³´ê³  ê±´ìˆ˜ê°€ **{count:,}ê±´**ìœ¼ë¡œ ê°€ì¥ ë§ìŠµë‹ˆë‹¤'
  eda_high_cfr: 'âš ï¸ **{device}**ì˜ ì¹˜ëª…ë¥ ì´ **{cfr:.2f}%**ë¡œ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤ (ì¤‘ëŒ€ í”¼í•´ {count:,}ê±´)'
  eda_avg_cfr_good: 'âœ… í‰ê·  ì¹˜ëª…ë¥ ì´ **{avg_cfr:.2f}%**ë¡œ ì–‘í˜¸í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤'
  eda_top_defect_type: 'ğŸ”§ ê°€ì¥ ë¹ˆë²ˆí•œ ê²°í•¨ ìœ í˜•ì€ **{defect_type}** ({count:,}ê±´)ì…ë‹ˆë‹¤'
  eda_no_anomaly: 'íŠ¹ì´ì‚¬í•­ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤'

  # ========== Spike íƒ­ ì¸ì‚¬ì´íŠ¸ ==========
  spike_critical: 'ğŸš¨ **ìµœê³  ìœ„í—˜ ê¸‰ì¦**: **{keyword}**\n- ë³´ê³  ê±´ìˆ˜: {c_base:,}ê±´ â†’ **{c_recent:,}ê±´** ({ratio:.2f}ë°° ê¸‰ì¦)\n- 3ê°€ì§€ íƒì§€ ë°©ë²• ëª¨ë‘ ê¸‰ì¦ìœ¼ë¡œ íŒì •\n- âš ï¸ **ì¦‰ì‹œ ì¡°ì‚¬ ê¶Œì¥** (FDA ë³´ê³ ì„œ ê²€í† , ì›ì¸ ë¶„ì„ í•„ìš”)'
  spike_new: 'âš¡ **ì‹ ê·œ ë“±ì¥ ê¸‰ì¦**: {new_count}ê°œ\n- ì˜ˆì‹œ: {examples}\n- ê³¼ê±°ì— ê±°ì˜ ë³´ê³ ë˜ì§€ ì•Šì•˜ìœ¼ë‚˜ ìµœê·¼ ê¸‰ì¦\n- ğŸ’¡ ì‹ ê·œ ì œí’ˆ ì¶œì‹œ ë˜ëŠ” ìƒˆë¡œìš´ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥ì„±'
  spike_severe_pattern: 'ğŸ”´ **ì‹¬ê° íŒ¨í„´**: {severe_count}ê°œ\n- ë†’ì€ ê¸‰ì¦ë¥  + ë§ì€ ë³´ê³  ê±´ìˆ˜ ì¡°í•©\n- **ìš°ì„ ìˆœìœ„ ë†’ìŒ**: ìƒìœ„ 10ê°œ í‚¤ì›Œë“œ ê°œë³„ ê²€í†  í•„ìš”'
  spike_alert_pattern: 'ğŸŸ  **ê²½ê³  íŒ¨í„´**: {alert_count}ê°œ\n- ì¤‘ê°„ ìˆ˜ì¤€ì˜ ê¸‰ì¦ ë˜ëŠ” ë³´ê³  ê±´ìˆ˜\n- ëª¨ë‹ˆí„°ë§ í•„ìš”'
  spike_none: 'âœ… í˜„ì¬ ê¸°ê°„ì— í†µê³„ì ìœ¼ë¡œ ìœ ì˜ë¯¸í•œ ê¸‰ì¦ì´ íƒì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'
  spike_none_good: 'ğŸ’¡ ì´ëŠ” ì¢‹ì€ ì‹ í˜¸ì…ë‹ˆë‹¤. ì œí’ˆ í’ˆì§ˆì´ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ê³  ìˆìŠµë‹ˆë‹¤.'
```

---

## ğŸ’¡ ë¦¬íŒ©í† ë§ ì´ì 

### 1. **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**
- ë©”ì‹œì§€ ë³€ê²½ ì‹œ YAML íŒŒì¼ë§Œ ìˆ˜ì •
- ì½”ë“œ ì „ì²´ë¥¼ ìˆ˜ì •í•  í•„ìš” ì—†ìŒ

### 2. **ì¼ê´€ì„± ë³´ì¥**
- ë™ì¼í•œ ë©”ì‹œì§€ê°€ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©ë  ë•Œ ìë™ìœ¼ë¡œ ì¼ê´€ì„± ìœ ì§€
- ì´ëª¨ì§€, í†¤ì•¤ë§¤ë„ˆ í†µì¼

### 3. **ë‹¤êµ­ì–´ ì§€ì› ìš©ì´**
```yaml
# í–¥í›„ ì˜ë¬¸ ë²„ì „ ì¶”ê°€ ê°€ëŠ¥
message_templates_en:
  cluster_most_cases: 'ğŸ“Š **Cluster {cluster_id}** contains the most cases ({count:,} cases)'
```

### 4. **A/B í…ŒìŠ¤íŒ… ê°„í¸í™”**
- ë©”ì‹œì§€ í†¤ ë³€ê²½ í…ŒìŠ¤íŠ¸ ì‹œ YAMLë§Œ ìˆ˜ì •
- ì½”ë“œ ë³€ê²½ ì—†ì´ ë©”ì‹œì§€ ì‹¤í—˜ ê°€ëŠ¥

---

## ğŸš€ ì‚¬ìš© ì˜ˆì‹œ

### ì½”ë“œì—ì„œ terminology ì‚¬ìš©í•˜ê¸°

```python
from dashboard.utils.terminology import get_term_manager

# ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
term = get_term_manager()

# ë©”ì‹œì§€ í¬ë§·íŒ…
msg = term.format_message('cluster_highest_cfr',
                         cluster_id=5,
                         cfr=12.5,
                         severe_count=100)

# Streamlitì—ì„œ í‘œì‹œ
st.error(msg)
# ì¶œë ¥: âš ï¸ **Cluster 5**ì˜ ì¹˜ëª…ë¥ ì´ **12.50%**ë¡œ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤ (ì¤‘ëŒ€ í”¼í•´ 100ê±´)
```

### ìš©ì–´ ê°€ì ¸ì˜¤ê¸°

```python
# í•œêµ­ì–´ ìš©ì–´
cfr_label = term.korean.metrics.cfr  # 'ì¹˜ëª…ë¥ '
manufacturer = term.korean.entities.manufacturer  # 'ì œì¡°ì‚¬'

# ì»¬ëŸ¼ í—¤ë” ë³€í™˜
df_display = df.rename(columns=term.column_headers)
```

---

## ğŸ“Š ë¦¬íŒ©í† ë§ í†µê³„

| í•­ëª© | Before | After |
|------|--------|-------|
| í•˜ë“œì½”ë”© ë©”ì‹œì§€ | ~20ê°œ | 0ê°œ |
| terminology ê¸°ë°˜ ë©”ì‹œì§€ | 0ê°œ | ~20ê°œ |
| ë©”ì‹œì§€ í…œí”Œë¦¿ (YAML) | 3ê°œ | 23ê°œ |
| ì¼ê´€ì„± ë³´ì¥ | âŒ | âœ… |
| ë‹¤êµ­ì–´ ì§€ì› ì¤€ë¹„ | âŒ | âœ… |

---

## ğŸ”® í–¥í›„ ê°œì„  ê³„íš

### Phase 1 (ì™„ë£Œ) âœ…
- ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€ í…œí”Œë¦¿í™”

### Phase 2 (ê¶Œì¥)
- ë‚˜ë¨¸ì§€ í•˜ë“œì½”ë”© ë¬¸ìì—´ ë§ˆì´ê·¸ë ˆì´ì…˜
- `utils.constants.py`ì˜ `Terms` í´ë˜ìŠ¤ â†’ terminology.yaml í†µí•©

### Phase 3 (ì¥ê¸°)
- ë‹¤êµ­ì–´ ì§€ì› (ì˜ë¬¸/í•œê¸€ ì „í™˜)
- ë©”ì‹œì§€ í†¤ì•¤ë§¤ë„ˆ A/B í…ŒìŠ¤íŒ…

---

## âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Cluster íƒ­ ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€ ì •ìƒ í‘œì‹œ
- [ ] EDA íƒ­ ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€ ì •ìƒ í‘œì‹œ
- [ ] Spike íƒ­ ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€ ì •ìƒ í‘œì‹œ
- [ ] ê¶Œì¥ì‚¬í•­ ë©”ì‹œì§€ ì •ìƒ í‘œì‹œ
- [ ] ë³€ìˆ˜ í¬ë§·íŒ… (ìˆ«ì, ë¬¸ìì—´) ì •ìƒ ë™ì‘
- [ ] ì—ëŸ¬ ì²˜ë¦¬ (ëˆ„ë½ëœ ë³€ìˆ˜) ì •ìƒ ë™ì‘

---

## ğŸ“š ê´€ë ¨ íŒŒì¼

- `config/dashboard/terminology.yaml` - ë©”ì‹œì§€ í…œí”Œë¦¿ ì •ì˜
- `dashboard/utils/terminology.py` - TerminologyManager í´ë˜ìŠ¤
- `dashboard/cluster_tab.py` - ë¦¬íŒ©í† ë§ ì ìš©
- `dashboard/eda_tab.py` - ë¦¬íŒ©í† ë§ ì ìš©
- `dashboard/spike_tab.py` - ë¦¬íŒ©í† ë§ ì ìš©

---

**ë¦¬íŒ©í† ë§ ì™„ë£Œì¼**: 2025-12-28
**ë‹´ë‹¹**: Claude Code Refactoring Agent
**ë²„ì „**: v1.0.0
