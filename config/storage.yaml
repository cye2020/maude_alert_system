# ============================================
# 저장소 설정 (S3, Snowflake)
# ============================================

# S3 설정
s3:
  enabled: true
  region: ap-northeast-2
  bucket_name: amazon-s3-fda

# Snowflake 설정
snowflake:
  enabled: true
  load:
    database: MAUDE
    schema: BRONZE
    tables:
      EVENT:
        primary_key: [source_system, source_file, mdr_report_key]
        business_primary_key: mdr_report_key
      UDI:
        primary_key: [source_system, source_file, public_device_record_key]
        business_primary_key: public_device_record_key
    stage: BRONZE_S3_STAGE
  transform:
    database: MAUDE
    schema: SILVER
    tables:
      EVENT_CURRENT:
        primary_key: [MDR_REPORT_KEY, UDI_DI, SOURCE_BATCH_ID]
        business_primary_key: [MDR_REPORT_KEY, UDI_DI]
        effective_from_col: DATE_CHANGED
      UDI_CURRENT:
        primary_key: [PRIMARY_UDI_DI, UDI_DI, SOURCE_BATCH_ID]
        business_primary_key: [PRIMARY_UDI_DI, UDI_DI]
        effective_from_col: PUBLIC_VERSION_DATE
  aggregate:
    database: MAUDE
    schema: SILVER
  udf:
    database: MAUDE
    schema: UDF


# 경로 설정
paths:
  local:
    data_file: "./data/silver/maude_clustered.parquet"

# Streamlit 대시보드
streamlit:
  host: "0.0.0.0"
  port: 8501x
  
  data_sources:
    use_s3: true
    use_snowflake: true
    cache_ttl: 3600  # seconds