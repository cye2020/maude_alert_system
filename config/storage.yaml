# ============================================
# 저장소 설정 (S3, Snowflake)
# ============================================

# S3 설정
s3:
  enabled: true
  region: "us-east-1"
  bucket: "maude-data-pipeline"
  
  # # 인증 (환경변수 사용 권장)
  # access_key_id: "${AWS_ACCESS_KEY_ID}"
  # secret_access_key: "${AWS_SECRET_ACCESS_KEY}"
  
  # 경로
  paths:
    bronze: "s3://maude-data-pipeline/bronze"
    silver: "s3://maude-data-pipeline/silver"
    gold: "s3://maude-data-pipeline/gold"
    temp: "s3://maude-data-pipeline/temp"
    logs: "s3://maude-data-pipeline/logs"
  
  # 파일 설정
  file_format:
    compression: "snappy"
    row_group_size: 100000
    
  # 업로드 설정
  upload:
    multipart_threshold: 100  # MB
    max_concurrency: 10

# Snowflake 설정
snowflake:
  enabled: true
  
  # # 연결 정보
  # connection:
  #   account: "${SNOWFLAKE_ACCOUNT}"
  #   user: "${SNOWFLAKE_USER}"
  #   password: "${SNOWFLAKE_PASSWORD}"
  #   warehouse: "COMPUTE_WH"
  #   database: "MAUDE_DB"
  #   schema: "PUBLIC"
  #   role: "ACCOUNTADMIN"
  
  # 테이블 매핑
  tables:
    bronze:
      maude: "BRONZE.MAUDE_RAW"
      udi: "BRONZE.UDI_RAW"
      
    silver:
      maude: "SILVER.MAUDE_CLEANED"
      udi: "SILVER.UDI_CLEANED"
      
    gold:
      maude: "GOLD.MAUDE_FINAL"
      udi: "GOLD.UDI_MATCHED"
      analytics: "GOLD.ANALYTICS_VIEW"
  
  # 로딩 옵션
  loading:
    copy_options:
      - "ON_ERROR = CONTINUE"
      - "FILE_FORMAT = (TYPE = PARQUET)"
    
    auto_create_table: true
    replace_if_exists: false

# Streamlit 대시보드
streamlit:
  host: "0.0.0.0"
  port: 8501
  
  data_sources:
    use_s3: true
    use_snowflake: true
    cache_ttl: 3600  # seconds