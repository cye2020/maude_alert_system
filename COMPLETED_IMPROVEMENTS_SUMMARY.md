# ëŒ€ì‹œë³´ë“œ ê°œì„  ì‘ì—… ì™„ë£Œ ìš”ì•½

**ë‚ ì§œ**: 2025-12-27
**ìƒíƒœ**: ì§„í–‰ ì¤‘

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë©”íŠ¸ë¦­ í…Œë‘ë¦¬ ì¶”ê°€
- **íŒŒì¼**: [dashboard/utils/custom_css.py](dashboard/utils/custom_css.py) (ì‹ ê·œ)
- **ë³€ê²½**: ëª¨ë“  st.metricì— í…Œë‘ë¦¬, ë°°ê²½ìƒ‰, í˜¸ë²„ íš¨ê³¼ ì¶”ê°€
- **íš¨ê³¼**: ë©”íŠ¸ë¦­ì´ ì‹œê°ì ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ ê°€ë…ì„± í–¥ìƒ

### 2. ë³¼ë“œ ë§ˆí¬ë‹¤ìš´ ì˜¤ë¥˜ ìˆ˜ì •
- **íŒŒì¼**: [dashboard/spike_tab.py](dashboard/spike_tab.py)
- **ë³€ê²½**: f-string ë‚´ ì´ì¤‘ ë³¼ë“œ (`**{var}**`) ì œê±°

### 3. ê¸‰ì¦ íƒì§€ ìš©ì–´ í†µì¼: "ìŠ¤íŒŒì´í¬" â†’ "ê¸‰ì¦"
- **íŒŒì¼**: [dashboard/spike_tab.py](dashboard/spike_tab.py)
- **ë³€ê²½**: ëª¨ë“  ì‚¬ìš©ì í‘œì‹œ í…ìŠ¤íŠ¸ í†µì¼
- **ìœ ì§€**: ë³€ìˆ˜ëª…/ì»¬ëŸ¼ëª…ì€ ê·¸ëŒ€ë¡œ ìœ ì§€

### 4. EDA ìš©ì–´: "ì œì¡°ì‚¬-ëª¨ë¸" â†’ "ì œì¡°ì‚¬-ì œí’ˆêµ°"
- **íŒŒì¼**: [dashboard/eda_tab.py](dashboard/eda_tab.py)
- **ë³€ê²½**: ì„¹ì…˜ ì œëª© ë° ì„¤ëª…

### 5. Overview ìš©ì–´: "ì¹˜ëª…ë„" â†’ "ì¹˜ëª…ë¥ "
- **íŒŒì¼**: [dashboard/overview_tab.py](dashboard/overview_tab.py)
- **ë³€ê²½**: Risk Matrix ì œëª©, yì¶• ë¼ë²¨ í•œê¸€í™”

### 6. í´ëŸ¬ìŠ¤í„° -1 ì œì™¸ í™•ì¸
- **íŒŒì¼**: [dashboard/cluster_tab.py](dashboard/cluster_tab.py)
- **ìƒíƒœ**: ì´ë¯¸ `exclude_minus_one=True`ë¡œ ì²˜ë¦¬ë¨

### 7. ê°œìš” íƒ­ êµ¬ì¡° ê°œì„ 
- **íŒŒì¼**: [dashboard/overview_tab.py](dashboard/overview_tab.py)
- **ë³€ê²½**:
  - ì´ì¤‘ì¶• ê·¸ë˜í”„ ì´ëª¨ì§€: ğŸ“Š â†’ ğŸ“ˆ (ê°œìš” íƒ­ê³¼ ì¤‘ë³µ ë°©ì§€)
  - ì œëª©: "Report Count & Severe Harm Rate (Dual-Axis)" â†’ "ë³´ê³  ê±´ìˆ˜ ë° ì¤‘ëŒ€ í”¼í•´ìœ¨ ì¶”ì´"
  - ì‚°ì—… ë¶„ì„ ì„¹ì…˜: header + ë¶ˆí•„ìš”í•œ êµ¬ë¶„ì„  ì œê±° â†’ subheaderë¡œ ê°„ì†Œí™”
  - ì œëª©: "ì‚°ì—… ë¶„ì„ (Industry Analysis)" â†’ "ë¦¬ìŠ¤í¬ ë§¤íŠ¸ë¦­ìŠ¤"
  - ë¶„ì„ ë‹¨ìœ„ í•œê¸€í™”: "Defect Type/Manufacturer/Product" â†’ "ê²°í•¨ ìœ í˜•/ì œì¡°ì‚¬/ì œí’ˆêµ°"

### 8. ê¸‰ì¦ íƒì§€ íŒ¨í„´ í•œê¸€í™”
- **íŒŒì¼**: [dashboard/spike_tab.py](dashboard/spike_tab.py) (ì „ì²´ ì¬ì‘ì„±)
- **ë³€ê²½**: ëª¨ë“  íŒ¨í„´ í‘œì‹œ í•œê¸€í™”
  - "Severe" â†’ "ì‹¬ê°"
  - "Alert" â†’ "ê²½ê³ "
  - "Attention" â†’ "ì£¼ì˜"
  - "General" â†’ "ì¼ë°˜"
- **ì ìš© ìœ„ì¹˜** (6ê³³):
  1. í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€
  2. íŒ¨í„´ë³„ ë¶„í¬ ë©”íŠ¸ë¦­
  3. ë¹ ë¥¸ ì„ íƒ ë²„íŠ¼
  4. ë¹ ë¥¸ í•„í„° í”„ë¦¬ì…‹
  5. íŒ¨í„´ í•„í„° format_func
  6. prepare_spike_table í•¨ìˆ˜

### 9. ì†Œìˆ˜ì  2ìë¦¬ í†µì¼

- **íŒŒì¼**: ì „ì²´ ëŒ€ì‹œë³´ë“œ íŒŒì¼
- **ë³€ê²½**: ëª¨ë“  `.0f`, `.1f`, `.3f` â†’ `.2f`ë¡œ í†µì¼
- **ìˆ˜ì •ëœ ìœ„ì¹˜** (24ê°œ):

  - [dashboard/overview_tab.py](dashboard/overview_tab.py): 9ê³³ (sparkline, risk matrix, big numbers)
  - [dashboard/eda_tab.py](dashboard/eda_tab.py): 7ê³³ (ì°¨íŠ¸ í…ìŠ¤íŠ¸, í˜¸ë²„í…œí”Œë¦¿, ì°¨ì´ ë¶„ì„, HTML ë°”)
  - [dashboard/utils/ui_components.py](dashboard/utils/ui_components.py): 3ê³³ (Z-score ë°°ì§€, ì°¨íŠ¸ í…ìŠ¤íŠ¸, HTML ë°”)
  - [dashboard/cluster_tab.py](dashboard/cluster_tab.py): 2ê³³ (í‰ê· , í‘œì¤€í¸ì°¨)
  - [dashboard/spike_tab.py](dashboard/spike_tab.py): 5ê³³ (ê¸‰ì¦ ë¹„ìœ¨, í‰ê·  íƒì§€ ë°©ë²•, ìµœëŒ€ ê¸‰ì¦, ì°¨íŠ¸ ì œëª©)
- **íš¨ê³¼**: ì „ì²´ ëŒ€ì‹œë³´ë“œì—ì„œ ì¼ê´€ëœ ì†Œìˆ˜ì  ìë¦¿ìˆ˜ í‘œì‹œ

### 10. ì¹˜ëª…ë¥ (CFR) ì¬ì •ì˜ - ì‚¬ë§ë¥ ê³¼ êµ¬ë¶„

- **ëª©ì **: ì¹˜ëª…ë¥ ì„ "ì‚¬ë§ + ì¤‘ì¦ë¶€ìƒ"ìœ¼ë¡œ ëª…í™•íˆ ì¬ì •ì˜í•˜ê³ , "ì‚¬ë§ë¥ " ìš©ì–´ ì œê±°
- **ë³€ê²½ ì‚¬í•­**:
  - **ì •ì˜ ë³€ê²½**: CFR = (ì‚¬ë§ + ì¤‘ì¦ë¶€ìƒ) / ì´ ê±´ìˆ˜ Ã— 100
  - **ì´ì „**: CFR = ì‚¬ë§ / ì´ ê±´ìˆ˜ Ã— 100 (ì‚¬ë§ë§Œ)
  - **ë³€ê²½ í›„**: patient_harm ê¸°ì¤€ìœ¼ë¡œ ì‚¬ë§ + Serious Injury í¬í•¨

- **ìˆ˜ì •ëœ íŒŒì¼**:
  1. [dashboard/utils/analysis.py](dashboard/utils/analysis.py)
     - `calculate_cfr_by_device()` í•¨ìˆ˜ ì™„ì „ ì¬ì‘ì„±
     - event_type ëŒ€ì‹  patient_harm ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½
     - severe_harm_count ì»¬ëŸ¼ ì¶”ê°€ (ì‚¬ë§ + ì¤‘ì¦ë¶€ìƒ)
     - CFR ê³„ì‚°ì‹ ë³€ê²½
     - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì—ì„œ event_column íŒŒë¼ë¯¸í„° ì œê±°

  2. [dashboard/eda_tab.py](dashboard/eda_tab.py)
     - ê³ ìœ„í—˜ CFR ê²½ê³  ë©”ì‹œì§€: "ì‚¬ë§ Xê±´" â†’ "ì¤‘ëŒ€ í”¼í•´ Xê±´"

  3. [dashboard/cluster_tab.py](dashboard/cluster_tab.py)
     - "ì‚¬ë§ë¥ " â†’ "ì¹˜ëª…ë¥ " ìš©ì–´ í†µì¼
     - death_rate â†’ cfr ë³€ìˆ˜ëª… ë³€ê²½
     - ê³„ì‚°ì‹: (ì‚¬ë§ + ì¤‘ì¦ë¶€ìƒ) / ì´ ê±´ìˆ˜ Ã— 100
     - ì°¨íŠ¸ ì œëª©: "í´ëŸ¬ìŠ¤í„°ë³„ ì‚¬ë§ë¥ " â†’ "í´ëŸ¬ìŠ¤í„°ë³„ ì¹˜ëª…ë¥ "
     - ì¸ì‚¬ì´íŠ¸ ë©”ì‹œì§€: "ì‚¬ë§ë¥ " â†’ "ì¹˜ëª…ë¥ ", "ì‚¬ë§ Xê±´" â†’ "ì¤‘ëŒ€ í”¼í•´ Xê±´"
     - ê°œë³„ í´ëŸ¬ìŠ¤í„° ìƒì„¸ì— "ì¹˜ëª…ë¥  (CFR)" ë©”íŠ¸ë¦­ ì¶”ê°€ (5ê°œ ì—´ë¡œ í™•ì¥)
     - í…Œì´ë¸” ì»¬ëŸ¼ëª…: "ì‚¬ë§ë¥  (%)" â†’ "ì¹˜ëª…ë¥  (%)"

- **íš¨ê³¼**:
  - ì˜ë£Œí†µê³„ í‘œì¤€ì— ë¶€í•©í•˜ëŠ” ì¹˜ëª…ë¥  ì •ì˜ ì ìš©
  - ì‚¬ë§ë§Œì´ ì•„ë‹Œ ì¤‘ëŒ€ í”¼í•´ ì „ì²´ë¥¼ í¬í•¨í•˜ì—¬ ìœ„í—˜ë„ ë” ì •í™•íˆ í‰ê°€
  - ëŒ€ì‹œë³´ë“œ ì „ì²´ì—ì„œ ì¼ê´€ëœ ìš©ì–´ ì‚¬ìš©

---

## ğŸ“Š ë³€ê²½ ìš”ì•½

| í•­ëª© | Before | After |
|------|--------|-------|
| **ë©”íŠ¸ë¦­** | í…Œë‘ë¦¬ ì—†ìŒ | í…Œë‘ë¦¬ + í˜¸ë²„ íš¨ê³¼ âœ… |
| **ê¸‰ì¦ ìš©ì–´** | "ìŠ¤íŒŒì´í¬" | "ê¸‰ì¦" âœ… |
| **EDA ìš©ì–´** | "ì œì¡°ì‚¬-ëª¨ë¸" | "ì œì¡°ì‚¬-ì œí’ˆêµ°" âœ… |
| **Overview ìš©ì–´** | "ì¹˜ëª…ë„", "Report Count" | "ì¹˜ëª…ë¥ ", "ë°œìƒ ë¹ˆë„" âœ… |
| **Overview ì´ëª¨ì§€** | ğŸ“Š (ì¤‘ë³µ) | ğŸ“ˆ (ì°¨ë³„í™”) âœ… |
| **ê¸‰ì¦ íŒ¨í„´** | Severe/Alert/Attention/General | ì‹¬ê°/ê²½ê³ /ì£¼ì˜/ì¼ë°˜ âœ… |
| **í´ëŸ¬ìŠ¤í„° -1** | - | ì´ë¯¸ ì œì™¸ë¨ âœ… |
| **ì†Œìˆ˜ì ** | .0f/.1f/.3f í˜¼ì¬ | .2f í†µì¼ âœ… |
| **CFR ì •ì˜** | ì‚¬ë§ë§Œ | ì‚¬ë§+ì¤‘ì¦ë¶€ìƒ âœ… |
| **ì‚¬ë§ë¥  ìš©ì–´** | "ì‚¬ë§ë¥ "ê³¼ "ì¹˜ëª…ë¥ " í˜¼ì¬ | "ì¹˜ëª…ë¥ " í†µì¼ âœ… |

---

## â³ ë‚¨ì€ ì‘ì—…

### ìš°ì„ ìˆœìœ„ ë†’ìŒ

1. **ëª¨ë“  ê·¸ë˜í”„ í•œê¸€ í‘œì¤€í™”** - xaxis_title, yaxis_title, ë²”ë¡€ ë“±

### ìš°ì„ ìˆœìœ„ ì¤‘ê°„

1. **ê¸‰ì¦ íƒì§€ í•„í„° ì„¤ëª…** - "ì£¼ì˜ í•„ìš”" vs "ì „ì²´ ê¸‰ì¦" vs "ê¸‰ì¦ë§Œ" ì°¨ì´ ëª…í™•í™”
2. **ë™ì  ê³„ì¸µ í•„í„° ì‹œìŠ¤í…œ** - ì‚¬ì´ë“œë°” êµ¬í˜„ (í° ì‘ì—…)

### ìš°ì„ ìˆœìœ„ ë‚®ìŒ

1. **ë¶ë§ˆí¬ ê¸°ëŠ¥ ìˆ˜ì •** - ë¶ˆëŸ¬ì˜¤ê¸° ì‘ë™ êµ¬í˜„ (ë³µì¡)

---

## ğŸ“ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

### ì‹ ê·œ ìƒì„±

1. [dashboard/utils/custom_css.py](dashboard/utils/custom_css.py)

### ìˆ˜ì •ë¨

1. [dashboard/Home.py](dashboard/Home.py) - CSS ì ìš©
2. [dashboard/spike_tab.py](dashboard/spike_tab.py) - ìš©ì–´ í†µì¼ (ê¸‰ì¦, íŒ¨í„´ í•œê¸€í™”), ì†Œìˆ˜ì  í†µì¼
3. [dashboard/eda_tab.py](dashboard/eda_tab.py) - ìš©ì–´ í†µì¼ (ì œí’ˆêµ°), ì†Œìˆ˜ì  í†µì¼, CFR ì¸ì‚¬ì´íŠ¸ ìˆ˜ì •
4. [dashboard/overview_tab.py](dashboard/overview_tab.py) - ìš©ì–´ í†µì¼ (ì¹˜ëª…ë¥ ), êµ¬ì¡° ê°œì„ , ì†Œìˆ˜ì  í†µì¼
5. [dashboard/cluster_tab.py](dashboard/cluster_tab.py) - ì†Œìˆ˜ì  í†µì¼, ì‚¬ë§ë¥ â†’ì¹˜ëª…ë¥  ë³€ê²½, CFR ë©”íŠ¸ë¦­ ì¶”ê°€
6. [dashboard/utils/ui_components.py](dashboard/utils/ui_components.py) - ì†Œìˆ˜ì  í†µì¼
7. [dashboard/utils/analysis.py](dashboard/utils/analysis.py) - CFR ê³„ì‚° ë¡œì§ ì¬ì‘ì„± (patient_harm ê¸°ì¤€)

---

**ì‘ì„±ì**: Claude Sonnet 4.5
**ì‘ì„±ì¼**: 2025-12-27
